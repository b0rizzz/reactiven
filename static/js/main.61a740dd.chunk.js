(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{21:function(e,t,n){e.exports=n(43)},26:function(e,t,n){},28:function(e,t,n){},35:function(e,t,n){},37:function(e,t,n){},39:function(e,t,n){},41:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(18),i=n.n(s),o=n(45),c=(n(26),n(3)),l=n(4),u=n(6),h=n(7),d=n(8),p=n(46),m=(n(28),function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"header"},r.a.createElement(p.a,{activeClassName:"active",to:"/create-word"},"Word"),r.a.createElement(p.a,{activeClassName:"active",to:"/create-phrase"},"Phrase"))}}]),t}(a.Component)),E=n(47),y=n(44),v=n(11),f=function(e){return r.a.createElement("form",null,r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{type:"email",name:"email",placeholder:"Email",value:e.user.email,onChange:e.onChange}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",name:"password",placeholder:"Password",value:e.user.password,onChange:e.onChange}),r.a.createElement("br",null),r.a.createElement("input",{type:"submit",value:"Login",onClick:e.onSave}))},g=new(n(20).Dispatcher),b={types:{REGISTER_USER:"REGISTER_USER",LOGIN_USER:"LOGIN_USER"},register:function(e){g.dispatch({type:this.types.REGISTER_USER,user:e})},login:function(e){g.dispatch({type:this.types.LOGIN_USER,user:e})}},C=n(14),O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"https://engrexapi.herokuapp.com"+e},w=O(),S=function(){function e(){Object(c.a)(this,e)}return Object(l.a)(e,null,[{key:"register",value:function(e){return window.fetch("".concat(w,"/register"),{method:"POST",mode:"cors",body:JSON.stringify(e),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){return e.json()})}},{key:"login",value:function(e){return window.fetch("".concat(w,"/login"),{method:"POST",mode:"cors",body:JSON.stringify(e),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){return e.json()})}}]),e}(),k=new(function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"register",value:function(e){var t=this;S.register(e).then(function(e){return t.emit(t.eventTypes.USER_REGISTERED,e)})}},{key:"login",value:function(e){var t=this;S.login(e).then(function(e){return t.emit(t.eventTypes.USER_LOGGEDIN,e)})}},{key:"handleAction",value:function(e){switch(e.type){case b.types.REGISTER_USER:this.register(e.user);break;case b.types.LOGIN_USER:this.login(e.user)}}}]),t}(C.EventEmitter));k.eventTypes={USER_REGISTERED:"user_registered",USER_LOGGEDIN:"user_loggedin"},g.register(k.handleAction.bind(k));var R=k,T=function(){function e(){Object(c.a)(this,e)}return Object(l.a)(e,null,[{key:"authenticateUser",value:function(e){var t=e.email,n=e._token;localStorage.setItem("_token",n),localStorage.setItem("email",t)}},{key:"isUserAuthenticated",value:function(){return null!==localStorage.getItem("_token")}},{key:"deauthenticateUser",value:function(){localStorage.removeItem("_token")}},{key:"getToken",value:function(){return localStorage.getItem("_token")}},{key:"getEmail",value:function(){return localStorage.getItem("email")}}]),e}(),j=(n(35),function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={user:{email:"",password:""}},n.handleLogin=n.handleLogin.bind(Object(v.a)(Object(v.a)(n))),R.on(R.eventTypes.USER_LOGGEDIN,n.handleLogin),n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentWillUnmount",value:function(){R.removeListener(R.eventTypes.USER_LOGGEDIN,this.handleLogin)}},{key:"handleChange",value:function(e){var t=e.target,n=t.name,a=t.value,r=this.state.user;r[n]=a,this.setState({user:r})}},{key:"handleForm",value:function(e){e.preventDefault(),b.login(this.state.user)}},{key:"handleLogin",value:function(e){e.error||(T.authenticateUser(e),this.props.history.push("/"))}},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{id:"loginForm"},r.a.createElement("h1",null,"Login"),r.a.createElement(f,{user:this.state.user,onChange:this.handleChange.bind(this),onSave:this.handleForm.bind(this)})))}},{key:"componentDidMount",value:function(){T.isUserAuthenticated()&&this.props.history.push("/")}}]),t}(a.Component)),_=function(e){return r.a.createElement("label",{htmlFor:e.name},e.name,r.a.createElement("input",{type:e.type,name:e.name,value:e.value,onChange:e.onChange}))},A=function(e){return r.a.createElement("form",null,r.a.createElement(_,{type:"text",name:"en",autocapitalize:"off",value:e.word.en,onChange:e.onChange}),r.a.createElement("br",null),r.a.createElement(_,{type:"text",name:"transcription",autocapitalize:"off",value:e.word.transcription,onChange:e.onChange}),r.a.createElement("br",null),r.a.createElement(_,{type:"text",name:"bg",autocapitalize:"off",value:e.word.bg,onChange:e.onChange}),r.a.createElement("br",null),r.a.createElement("input",{type:"submit",value:"Save",onClick:e.onSave}))},D={types:{CREATE_WORD:"CREATE_WORD",CREATE_PHRASE:"CREATE_PHRASE"},createWord:function(e){g.dispatch({type:this.types.CREATE_WORD,word:e})},createPhrase:function(e){g.dispatch({type:this.types.CREATE_PHRASE,phrase:e})}},U=O(),W=function(){function e(){Object(c.a)(this,e)}return Object(l.a)(e,null,[{key:"createWord",value:function(e){return window.fetch("".concat(U,"/words/store"),{method:"POST",mode:"cors",body:JSON.stringify(e),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){return e.json()})}},{key:"createPhrase",value:function(e){return window.fetch("".concat(U,"/phrases/store"),{method:"POST",mode:"cors",body:JSON.stringify(e),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){return e.json()})}}]),e}(),P=new(function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"createWord",value:function(e){var t=this;W.createWord(e).then(function(e){return t.emit(t.eventTypes.WORD_CREATED,e)})}},{key:"createPhrase",value:function(e){var t=this;W.createPhrase(e).then(function(e){return t.emit(t.eventTypes.PHRASE_CREATED,e)})}},{key:"handleAction",value:function(e){switch(e.type){case D.types.CREATE_WORD:this.createWord(e.word);break;case D.types.CREATE_PHRASE:this.createPhrase(e.phrase)}}}]),t}(C.EventEmitter));P.eventTypes={WORD_CREATED:"word_created",PHRASE_CREATED:"phrase_created"},g.register(P.handleAction.bind(P));var I=P,N=(n(37),function(e){return r.a.createElement("div",{className:"alert ".concat(e.type," ").concat(e.display)},r.a.createElement("span",{className:"closebtn",onClick:e.closeAlert},"\xd7"),e.text)}),G=(n(39),function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={word:{en:"",transcription:"",bg:"",_token:"",email:""},display:"hidden",message:"The word was successfully created.",alertType:"success"},n.handleCreate=n.handleCreate.bind(Object(v.a)(Object(v.a)(n))),I.on(I.eventTypes.WORD_CREATED,n.handleCreate),n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentWillUnmount",value:function(){I.removeListener(I.eventTypes.WORD_CREATED,this.handleCreate)}},{key:"handleChange",value:function(e){var t=e.target,n=t.name,a=t.value,r=this.state.word;r[n]=a,this.setState({word:r})}},{key:"handleForm",value:function(e){e.preventDefault(),D.createWord(this.state.word)}},{key:"handleCreate",value:function(e){if(e.error)e.error&&this.setState({display:"",alertType:"danger",message:e.errors[0].message});else{var t=this.state.word;t.en="",t.transcription="",t.bg="",this.setState({display:"",alertType:"success",message:"The word was successfully created.",word:t})}}},{key:"handleCloseAlert",value:function(e){this.setState({display:"hidden"})}},{key:"render",value:function(){var e=this.state,t=e.message,n=e.alertType;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{id:"createWordForm"},r.a.createElement("h1",null,"Create Word"),r.a.createElement(N,{type:n,display:this.state.display,text:t,closeAlert:this.handleCloseAlert.bind(this)}),r.a.createElement(A,{word:this.state.word,onChange:this.handleChange.bind(this),onSave:this.handleForm.bind(this)})))}},{key:"componentDidMount",value:function(){if(T.isUserAuthenticated()){var e=this.state.word;e._token=T.getToken(),e.email=T.getEmail(),this.setState({word:e})}else this.props.history.push("/login")}}]),t}(a.Component)),L=function(e){return r.a.createElement("form",null,r.a.createElement(_,{type:"text",name:"en",value:e.phrase.en,onChange:e.onChange}),r.a.createElement("br",null),r.a.createElement(_,{type:"text",name:"bg",value:e.phrase.bg,onChange:e.onChange}),r.a.createElement("br",null),r.a.createElement("input",{type:"submit",value:"Save",onClick:e.onSave}))},x=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={phrase:{en:"",bg:"",_token:"",email:""},display:"hidden",message:"The phrase was successfully created.",alertType:"success"},n.handleCreate=n.handleCreate.bind(Object(v.a)(Object(v.a)(n))),I.on(I.eventTypes.PHRASE_CREATED,n.handleCreate),n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentWillUnmount",value:function(){I.removeListener(I.eventTypes.PHRASE_CREATED,this.handleCreate)}},{key:"handleChange",value:function(e){var t=e.target,n=t.name,a=t.value,r=this.state.phrase;r[n]=a,this.setState({phrase:r})}},{key:"handleForm",value:function(e){e.preventDefault(),D.createPhrase(this.state.phrase)}},{key:"handleCreate",value:function(e){if(e.error)e.error&&this.setState({display:"",alertType:"danger",message:e.errors[0].message});else{var t=this.state.phrase;t.en="",t.bg="",this.setState({display:"",alertType:"success",message:"The phrase was successfully created.",phrase:t})}}},{key:"handleCloseAlert",value:function(e){this.setState({display:"hidden"})}},{key:"render",value:function(){var e=this.state,t=e.message,n=e.alertType;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{id:"createWordForm"},r.a.createElement("h1",null,"Create Phrase"),r.a.createElement(N,{type:n,display:this.state.display,text:t,closeAlert:this.handleCloseAlert.bind(this)}),r.a.createElement(L,{phrase:this.state.phrase,onChange:this.handleChange.bind(this),onSave:this.handleForm.bind(this)})))}},{key:"componentDidMount",value:function(){if(T.isUserAuthenticated()){var e=this.state.phrase;e._token=T.getToken(),e.email=T.getEmail(),this.setState({phrase:e})}else this.props.history.push("/login")}}]),t}(a.Component),F=function(){return r.a.createElement(E.a,null,r.a.createElement(y.a,{path:"/",exact:!0,component:G}),r.a.createElement(y.a,{path:"/create-word",component:G}),r.a.createElement(y.a,{path:"/create-phrase",component:x}),r.a.createElement(y.a,{path:"/login",component:j}))},H=(n(41),function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(m,null),r.a.createElement(F,null))}}]),t}(a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(o.a,{basename:"/reactiven"},r.a.createElement(H,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[21,2,1]]]);
//# sourceMappingURL=main.61a740dd.chunk.js.map