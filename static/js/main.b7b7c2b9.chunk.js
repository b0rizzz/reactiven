(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{21:function(e,t,n){e.exports=n(43)},26:function(e,t,n){},28:function(e,t,n){},34:function(e,t,n){},36:function(e,t,n){},38:function(e,t,n){},41:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(18),i=n.n(o),l=n(45),c=(n(26),n(3)),s=n(4),u=n(8),h=n(9),d=n(10),m=n(44),p=(n(28),function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).handleClick=function(e){/\/lessons/.test(window.location.href)&&(e.preventDefault(),document.body.scrollTop=document.documentElement.scrollTop=0)},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"header"},r.a.createElement(m.a,{className:"active",to:"/",onClick:this.handleClick},"Words and Phrases"))}}]),t}(a.Component)),E=n(47),f=n(46),v=n(11),y=function(e){return r.a.createElement("form",null,r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{type:"email",name:"email",placeholder:"Email",value:e.user.email,onChange:e.onChange}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",name:"password",placeholder:"Password",value:e.user.password,onChange:e.onChange}),r.a.createElement("br",null),r.a.createElement("input",{type:"submit",value:"Login",onClick:e.onSave}))},b=new(n(19).Dispatcher),g={types:{REGISTER_USER:"REGISTER_USER",LOGIN_USER:"LOGIN_USER"},register:function(e){b.dispatch({type:this.types.REGISTER_USER,user:e})},login:function(e){b.dispatch({type:this.types.LOGIN_USER,user:e})}},O=n(13),w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"https://engrexapi.herokuapp.com"+e},k=w(),j=function(){function e(){Object(c.a)(this,e)}return Object(s.a)(e,null,[{key:"register",value:function(e){return window.fetch("".concat(k,"/register"),{method:"POST",mode:"cors",body:JSON.stringify(e),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){return e.json()})}},{key:"login",value:function(e){return window.fetch("".concat(k,"/login"),{method:"POST",mode:"cors",body:JSON.stringify(e),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){return e.json()})}}]),e}(),C=new(function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"register",value:function(e){var t=this;j.register(e).then(function(e){return t.emit(t.eventTypes.USER_REGISTERED,e)})}},{key:"login",value:function(e){var t=this;j.login(e).then(function(e){return t.emit(t.eventTypes.USER_LOGGEDIN,e)})}},{key:"handleAction",value:function(e){switch(e.type){case g.types.REGISTER_USER:this.register(e.user);break;case g.types.LOGIN_USER:this.login(e.user)}}}]),t}(O.EventEmitter));C.eventTypes={USER_REGISTERED:"user_registered",USER_LOGGEDIN:"user_loggedin"},b.register(C.handleAction.bind(C));var R=C,S=function(){function e(){Object(c.a)(this,e)}return Object(s.a)(e,null,[{key:"authenticateUser",value:function(e){var t=e.email,n=e._token;localStorage.setItem("_token",n),localStorage.setItem("email",t)}},{key:"isUserAuthenticated",value:function(){return null!==localStorage.getItem("_token")}},{key:"deauthenticateUser",value:function(){localStorage.removeItem("_token")}},{key:"getToken",value:function(){return localStorage.getItem("_token")}},{key:"getEmail",value:function(){return localStorage.getItem("email")}}]),e}(),T=(n(34),function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={user:{email:"",password:""}},n.handleLogin=n.handleLogin.bind(Object(v.a)(Object(v.a)(n))),R.on(R.eventTypes.USER_LOGGEDIN,n.handleLogin),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentWillUnmount",value:function(){R.removeListener(R.eventTypes.USER_LOGGEDIN,this.handleLogin)}},{key:"handleChange",value:function(e){var t=e.target,n=t.name,a=t.value,r=this.state.user;r[n]=a,this.setState({user:r})}},{key:"handleForm",value:function(e){e.preventDefault(),g.login(this.state.user)}},{key:"handleLogin",value:function(e){e.error||(S.authenticateUser(e),this.props.history.push("/"))}},{key:"render",value:function(){return r.a.createElement("div",{id:"loginForm"},r.a.createElement("h1",null,"Login"),r.a.createElement(y,{user:this.state.user,onChange:this.handleChange.bind(this),onSave:this.handleForm.bind(this)}))}},{key:"componentDidMount",value:function(){S.isUserAuthenticated()&&this.props.history.push("/")}}]),t}(a.Component)),_=function(e){return r.a.createElement("form",null,r.a.createElement("label",{htmlFor:"en"},"en"),r.a.createElement("input",{type:"text",name:"en",value:e.word.en,onChange:e.onChange}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"bg"},"bg"),r.a.createElement("input",{type:"text",name:"bg",value:e.word.bg,onChange:e.onChange}),r.a.createElement("br",null),r.a.createElement("input",{type:"submit",value:"Save",onClick:e.onSave}))},D={types:{CREATE_WORD:"CREATE_WORD"},createWord:function(e){b.dispatch({type:this.types.CREATE_WORD,word:e})}},U=w(),A=function(){function e(){Object(c.a)(this,e)}return Object(s.a)(e,null,[{key:"createWord",value:function(e){return window.fetch("".concat(U,"/words/store"),{method:"POST",mode:"cors",body:JSON.stringify(e),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){return e.json()})}}]),e}(),I=new(function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"createWord",value:function(e){var t=this;A.createWord(e).then(function(e){return t.emit(t.eventTypes.WORD_CREATED,e)})}},{key:"handleAction",value:function(e){switch(e.type){case D.types.CREATE_WORD:this.createWord(e.word)}}}]),t}(O.EventEmitter));I.eventTypes={WORD_CREATED:"word_created"},b.register(I.handleAction.bind(I));var W=I,G=(n(36),function(e){return r.a.createElement("div",{className:"alert success ".concat(e.display)},r.a.createElement("span",{className:"closebtn",onClick:e.closeAlert},"\xd7"),e.text)}),L=(n(38),function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={word:{en:"",bg:"",_token:"",email:""},display:"hidden"},n.handleCreate=n.handleCreate.bind(Object(v.a)(Object(v.a)(n))),W.on(W.eventTypes.WORD_CREATED,n.handleCreate),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentWillUnmount",value:function(){W.removeListener(W.eventTypes.WORD_CREATED,this.handleCreate)}},{key:"handleChange",value:function(e){var t=e.target,n=t.name,a=t.value,r=this.state.word;r[n]=a,this.setState({word:r})}},{key:"handleForm",value:function(e){e.preventDefault(),D.createWord(this.state.word)}},{key:"handleCreate",value:function(e){if(!e.error){var t=this.state.word;t.en="",t.bg="",this.setState({display:"",word:t})}}},{key:"handleCloseAlert",value:function(e){this.setState({display:"hidden"})}},{key:"render",value:function(){return r.a.createElement("div",{id:"createWordForm"},r.a.createElement("h1",null,"Create Word"),r.a.createElement(G,{display:this.state.display,text:"The word was successfully created.",closeAlert:this.handleCloseAlert.bind(this)}),r.a.createElement(_,{word:this.state.word,onChange:this.handleChange.bind(this),onSave:this.handleForm.bind(this)}))}},{key:"componentDidMount",value:function(){if(S.isUserAuthenticated()){var e=this.state.word;e._token=S.getToken(),e.email=S.getEmail(),this.setState({word:e})}else this.props.history.push("/login")}}]),t}(a.Component)),N=function(){return r.a.createElement(E.a,null,r.a.createElement(f.a,{path:"/",exact:!0,component:L}),r.a.createElement(f.a,{path:"/login",component:T}))},x=(n(41),function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(p,null),r.a.createElement(N,null))}}]),t}(a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(l.a,null,r.a.createElement(x,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[21,2,1]]]);
//# sourceMappingURL=main.b7b7c2b9.chunk.js.map